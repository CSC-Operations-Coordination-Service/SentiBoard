{% extends "layouts/base-responsive.html" %}

{% block title %} Dashboard {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}

	<link rel="stylesheet" href="/static/assets/css/dashboard.css">

{% endblock stylesheets %}

{% block content %}

<!-- Define page content -->
<div class="content">
	<div class="page-inner">

		<!-- Breadcrumb -->
		<div class="page-header">
			<h4 class="page-title">Space Segment</h4>
			<ul class="breadcrumbs">
				<li class="nav-home">
					<a href="/index.html">
						<i class="flaticon-home"></i>
					</a>
				</li>
				<li class="separator">
					<i class="flaticon-right-arrow"></i>
				</li>
				<li class="nav-item">
					<a href="#">Quarterly Reports</a>
				</li>
				<li class="separator">
					<i class="flaticon-right-arrow"></i>
				</li>
				<li class="nav-item">
					<a href="#">Space Segment</a>
				</li>
			</ul>
		</div>

		<!-- Datatake details panel -->
		<div class="modal fade" id="showDatatakeDetailsModal" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content" style="background: #202940">
					<div class="modal-header no-bd">
						<h5 class="modal-title">
							<span class="fw-mediumbold">View</span>
							<span class="fw-light">Datatake details</span>
						</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true" style="color: white">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<form>
							<div id="space-segment-datatake-details">
							</div>
						</form>
					</div>
					<div class="modal-footer no-bd">
						<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Collapsible description panel -->
		<div class="row">
			<div class="card-body" style="padding-bottom: 0.0rem !important">
				<div class="flex flex-column faq-section">
					<div class="row">
						<div class="col-md-12">
							<div id="accordion">
								<div class="card">
									<div class="card-header" id="heading-description">
										<h5 class="mb-0" style="color: white">
											<a role="button" data-toggle="collapse" href="#description"
											   aria-expanded="false" aria-controls="description"
											   style="color: white; text-decoration: none">
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description
											</a>
										</h5>
									</div>
									<div id="description" class="collapse hide" data-parent="#accordion"
										 aria-labelledby="heading-description">
										<div class="card-body">
											This view summarizes the global statistics of the space segment, namely the
											status of satellites and of the relevant acquisitions.
											The page is divided into two main sections:<br>
											- Satellite's equipment status;<br>
											- Planned vs archived image acquisitions.<br>
											The satellite's equipment status shows the total availability of the main
											satellite subsystems, during the selected time period.
											By clicking on the magnifying lens, a pop-up is displayed, listing the
											spacecraft anomalies having an impact of the equipment
											availability.<br>
											The planned vs archived image acquisitions reports, per each satellite, the
											comparison between the planned and the effectively
											archived data (generating the L0 products). Differences between planned vs
											archived data may be due to:<br>
											- Satellite issues, caused by anomalies affecting any of the satellite
											equipments;<br>
											- Acquisition issues, i.e. problems in the downlink phase;<br>
											- Other issues, like interferences with other satellites or bad weather.<br>
											Even in this case, by clicking on the magnifying lens, the details about the
											impacting anomalies is reported.
											By default, results are referred to the previous completed quarter.
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Instrument availability per Platform -->
		<div class="row">
			{% for sat, sat_data in satellites.items() %}
				<div class="col-md-4">
					<div class="card">
						<div class="card-body">
							<div class="d-flex justify-content-between">
								<div>
									<h5><b>{{ sat_data.fullname }}</b></h5>
									<p class="text-muted">Subsystems availability</p>
								</div>
								<div class="calendar-details">
									<i class="la flaticon-search-1" data-placement="bottom"
									data-toggle="tooltip"
									onclick="spaceSegment.showUnavailabilityEvents('{{ sat }}')"
									title="Display the relevant unavailabilities"></i>
								</div>
								<h3 class="fw-bold text-info mb-3" id="{{ sat|lower }}-avail-perc">{{ "%.2f"|format(sat_data.success) }}%</h3>
							</div>
							{% for instr in sat_data.instruments %}
								<div class="progress progress-sm {% if not loop.first %}mt-2{% endif %}">
									<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="{{ instr.availability }}"
										class="progress-bar bg-{{ space_segment_colors[sat]|default('info') }}" 
										id="{{ sat|lower }}-{{ instr.name|lower }}-avail-bar" role="progressbar"
										style="width: {{ "%.2f"|format(instr.availability) }}%;"></div>
								</div>
								<div class="d-flex justify-content-between">
									<p class="text-muted mb-0">{{ instr.name }}</p>
									<p class="text-muted mb-0" id="{{ sat|lower }}-{{ instr.name|lower }}-avail-perc">
										{{ "%.2f"|format(instr.availability) }}%</p>
								</div>
							{% endfor %}
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
		<!-- Successful vs failed scanning operations, per satellite (pie charts) -->
		<div class="row">
			<!-- Sentinel-1A -->
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<div class="row">
							<div class="card-title ml-3">Copernicus Sentinel-1A planned vs archived L0 data</div>
							<i class="la flaticon-search-1 ml-2 mt-1" data-placement="bottom"
									   data-toggle="tooltip" onclick="spaceSegment.showSensingStatistics('S1A')"
									   title="Display the global sensing statistics"></i>
						</div>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="chart-container col-md-3">
								<canvas id="s1a-sensing-statistics-pie-chart"></canvas>
							</div>
							<div class="row col-md-8" id="s1a-boxes-container" style="display: none">
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body ">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-success text-success"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Successful sensing [hours]</p>
															<h4 class="card-title" id="s1a-successful-datatakes-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Sensing failed due to Satellite issues [hours]</p>
															<h4 class="card-title" id="s1a-satellite-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Sensing failed due to Acquisition Service issues [hours]</p>
															<h4 class="card-title" id="s1a-acquisition-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Sensing failed due to Other causes (RFI, bad weather, MPS) [hours]</p>
															<h4 class="card-title" id="s1a-other-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
							</div>
							<div class="table-responsive col-md-8" id="s1a-table-container" style="display: none">
								<table id="s1a-impacted-datatakes-table" class="display table table-striped table-hover" >
									<thead>
										<tr>
											<th style="max-width: 120px">Data Take ID</th>
											<th>Date</th>
											<th style="max-width: 100px">Issue type</th>
											<th style="max-width: 100px">Issue link</th>
											<th style="max-width: 100px">L0 Completeness</th>
											<th style="max-width: 60px">Actions</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Sentinel-1C -->
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<div class="row">
							<div class="card-title ml-3">Copernicus Sentinel-1C planned vs archived L0 data</div>
							<i class="la flaticon-search-1 ml-2 mt-1" data-placement="bottom"
									   data-toggle="tooltip" onclick="spaceSegment.showSensingStatistics('S1C')"
									   title="Display the global sensing statistics"></i>
						</div>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="chart-container col-md-3">
								<canvas id="s1c-sensing-statistics-pie-chart"></canvas>
							</div>
							<div class="row col-md-8" id="s1c-boxes-container" style="display: none">
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body ">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-success text-success"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Successful sensing [hours]</p>
															<h4 class="card-title" id="s1c-successful-datatakes-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Sensing failed due to Satellite issues [hours]</p>
															<h4 class="card-title" id="s1c-satellite-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Sensing failed due to Acquisition Service issues [hours]</p>
															<h4 class="card-title" id="s1c-acquisition-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Sensing failed due to Other causes (RFI, bad weather, MPS) [hours]</p>
															<h4 class="card-title" id="s1c-other-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
							</div>
							<div class="table-responsive col-md-8" id="s1c-table-container" style="display: none">
								<table id="s1c-impacted-datatakes-table" class="display table table-striped table-hover" >
									<thead>
										<tr>
											<th style="max-width: 120px">Data Take ID</th>
											<th>Date</th>
											<th style="max-width: 100px">Issue type</th>
											<th style="max-width: 100px">Issue link</th>
											<th style="max-width: 100px">L0 Completeness</th>
											<th style="max-width: 60px">Actions</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Sentinel-2A -->
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<div class="row">
							<div class="card-title ml-3">Copernicus Sentinel-2A planned vs archived L0 data</div>
							<i class="la flaticon-search-1 ml-2 mt-1" data-placement="bottom"
									   data-toggle="tooltip" onclick="spaceSegment.showSensingStatistics('S2A')"
									   title="Display the global sensing statistics"></i>
						</div>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="chart-container col-md-3">
								<canvas id="s2a-sensing-statistics-pie-chart"></canvas>
							</div>
							<div class="row col-md-8" id="s2a-boxes-container" style="display: none">
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body ">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-success text-success"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Successful datatakes</p>
															<h4 class="card-title" id="s2a-successful-datatakes-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Failures due to Satellite issues</p>
															<h4 class="card-title" id="s2a-satellite-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Failures due to Acquisition Service issues</p>
															<h4 class="card-title" id="s2a-acquisition-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Failures due to Other causes (RFI, bad weather, MPS)</p>
															<h4 class="card-title" id="s2a-other-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
							</div>
							<div class="table-responsive col-md-8" id="s2a-table-container" style="display: none">
								<table id="s2a-impacted-datatakes-table" class="display table table-striped table-hover" >
									<thead>
										<tr>
											<th style="max-width: 120px">Data Take ID</th>
											<th>Date</th>
											<th style="max-width: 100px">Issue type</th>
											<th style="max-width: 100px">Issue link</th>
											<th style="max-width: 100px">L0 Completeness</th>
											<th style="max-width: 60px">Actions</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Sentinel-2B -->
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<div class="row">
							<div class="card-title ml-3">Copernicus Sentinel-2B planned vs archived L0 data</div>
							<i class="la flaticon-search-1 ml-2 mt-1" data-placement="bottom"
									   data-toggle="tooltip" onclick="spaceSegment.showSensingStatistics('S2B')"
									   title="Display the global sensing statistics"></i>
						</div>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="chart-container col-md-3">
								<canvas id="s2b-sensing-statistics-pie-chart" style="width: 50%; height: 50%"></canvas>
							</div>
							<div class="row col-md-8" id="s2b-boxes-container" style="display: none">
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body ">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-success text-success"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Successful datatakes</p>
															<h4 class="card-title" id="s2b-successful-datatakes-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Failures due to Satellite issues</p>
															<h4 class="card-title" id="s2b-satellite-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Failures due to Acquisition Service issues</p>
															<h4 class="card-title" id="s2b-acquisition-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Failures due to Other causes (RFI, bad weather, MPS)</p>
															<h4 class="card-title" id="s2b-other-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
							</div>
							<div class="table-responsive col-md-8" id="s2b-table-container" style="display: none">
								<table id="s2b-impacted-datatakes-table" class="display table table-striped table-hover" >
									<thead>
										<tr>
											<th style="max-width: 120px">Data Take ID</th>
											<th>Date</th>
											<th style="max-width: 100px">Issue type</th>
											<th style="max-width: 100px">Issue link</th>
											<th style="max-width: 100px">L0 Completeness</th>
											<th style="max-width: 60px">Actions</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Sentinel-2C -->
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<div class="row">
							<div class="card-title ml-3">Copernicus Sentinel-2C planned vs archived L0 data</div>
							<i class="la flaticon-search-1 ml-2 mt-1" data-placement="bottom"
									   data-toggle="tooltip" onclick="spaceSegment.showSensingStatistics('S2C')"
									   title="Display the global sensing statistics"></i>
						</div>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="chart-container col-md-3">
								<canvas id="s2c-sensing-statistics-pie-chart" style="width: 50%; height: 50%"></canvas>
							</div>
							<div class="row col-md-8" id="s2c-boxes-container" style="display: none">
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body ">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-success text-success"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Successful datatakes</p>
															<h4 class="card-title" id="s2c-successful-datatakes-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Failures due to Satellite issues</p>
															<h4 class="card-title" id="s2c-satellite-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Failures due to Acquisition Service issues</p>
															<h4 class="card-title" id="s2c-acquisition-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								<div class="col-md-4">
										<div class="card card-stats card-round">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="flaticon-error text-danger"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Failures due to Other causes (RFI, bad weather, MPS)</p>
															<h4 class="card-title" id="s2c-other-failures-box">
																<div class="spinner">
																	<div class="bounce1"></div>
																	<div class="bounce2"></div>
																	<div class="bounce3"></div>
																</div>
															</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
							</div>
							<div class="table-responsive col-md-8" id="s2c-table-container" style="display: none">
								<table id="s2c-impacted-datatakes-table" class="display table table-striped table-hover" >
									<thead>
										<tr>
											<th style="max-width: 120px">Data Take ID</th>
											<th>Date</th>
											<th style="max-width: 100px">Issue type</th>
											<th style="max-width: 100px">Issue link</th>
											<th style="max-width: 100px">L0 Completeness</th>
											<th style="max-width: 60px">Actions</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Sentinel-3A -->
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<div class="row">
							<div class="card-title ml-3">Copernicus Sentinel-3A planned vs archived L0 data</div>
							<i class="la flaticon-search-1 ml-2 mt-1" data-placement="bottom"
									   data-toggle="tooltip" onclick="spaceSegment.showSensingStatistics('S3A')"
									   title="Display the global sensing statistics"></i>
						</div>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="chart-container col-md-3">
								<canvas id="s3a-sensing-statistics-pie-chart"></canvas>
							</div>
							<div class="row col-md-8" id="s3a-boxes-container" style="display: none">
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body ">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-success text-success"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Successful datatakes</p>
														<h4 class="card-title" id="s3a-successful-datatakes-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-error text-danger"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Failures due to Satellite issues</p>
														<h4 class="card-title" id="s3a-satellite-failures-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-error text-danger"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Failures due to Acquisition Service issues</p>
														<h4 class="card-title" id="s3a-acquisition-failures-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-error text-danger"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Failures due to Other causes (RFI, bad weather, MPS)</p>
														<h4 class="card-title" id="s3a-other-failures-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="table-responsive col-md-8" id="s3a-table-container" style="display: none">
								<table id="s3a-impacted-datatakes-table" class="display table table-striped table-hover" >
									<thead>
										<tr>
											<th style="max-width: 120px">Data Take ID</th>
											<th>Date</th>
											<th style="max-width: 100px">Issue type</th>
											<th style="max-width: 100px">Issue link</th>
											<th style="max-width: 100px">L0 Completeness</th>
											<th style="max-width: 60px">Actions</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Sentinel-3B -->
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<div class="row">
							<div class="card-title ml-3">Copernicus Sentinel-3B planned vs archived L0 data</div>
							<i class="la flaticon-search-1 ml-2 mt-1" data-placement="bottom"
									   data-toggle="tooltip" onclick="spaceSegment.showSensingStatistics('S3B')"
									   title="Display the global sensing statistics"></i>
						</div>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="chart-container col-md-3">
								<canvas id="s3b-sensing-statistics-pie-chart"></canvas>
							</div>
							<div class="row col-md-8" id="s3b-boxes-container" style="display: none">
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body ">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-success text-success"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Successful datatakes</p>
														<h4 class="card-title" id="s3b-successful-datatakes-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-error text-danger"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Failures due to Satellite issues</p>
														<h4 class="card-title" id="s3b-satellite-failures-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-error text-danger"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Failures due to Acquisition Service issues</p>
														<h4 class="card-title" id="s3b-acquisition-failures-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-error text-danger"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Failures due to Other causes (RFI, bad weather, MPS)</p>
														<h4 class="card-title" id="s3b-other-failures-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="table-responsive col-md-8" id="s3b-table-container" style="display: none">
								<table id="s3b-impacted-datatakes-table" class="display table table-striped table-hover" >
									<thead>
										<tr>
											<th style="max-width: 120px">Data Take ID</th>
											<th>Date</th>
											<th style="max-width: 100px">Issue type</th>
											<th style="max-width: 100px">Issue link</th>
											<th style="max-width: 100px">L0 Completeness</th>
											<th style="max-width: 60px">Actions</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Sentinel-5P -->
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<div class="row">
							<div class="card-title ml-3">Copernicus Sentinel-5p planned vs archived L0 data</div>
							<i class="la flaticon-search-1 ml-2 mt-1" data-placement="bottom"
									   data-toggle="tooltip" onclick="spaceSegment.showSensingStatistics('S5P')"
									   title="Display the global sensing statistics"></i>
						</div>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="chart-container col-md-3">
								<canvas id="s5p-sensing-statistics-pie-chart" style="width: 50%; height: 50%"></canvas>
							</div>
							<div class="row col-md-8" id="s5p-boxes-container" style="display: none">
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body ">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-success text-success"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Successful datatakes</p>
														<h4 class="card-title" id="s5p-successful-datatakes-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-error text-danger"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Failures due to Satellite issues</p>
														<h4 class="card-title" id="s5p-satellite-failures-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-error text-danger"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Failures due to Acquisition Service issues</p>
														<h4 class="card-title" id="s5p-acquisition-failures-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card card-stats card-round">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="flaticon-error text-danger"></i>
													</div>
												</div>
												<div class="col-7 col-stats">
													<div class="numbers">
														<p class="card-category">Failures due to Other causes (RFI, bad weather, MPS)</p>
														<h4 class="card-title" id="s5p-other-failures-box">
															<div class="spinner">
																<div class="bounce1"></div>
																<div class="bounce2"></div>
																<div class="bounce3"></div>
															</div>
														</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="table-responsive col-md-8" id="s5p-table-container" style="display: none">
								<table id="s5p-impacted-datatakes-table" class="display table table-striped table-hover">
									<thead>
										<tr>
											<th style="max-width: 120px">Data Take ID</th>
											<th>Date</th>
											<th style="max-width: 100px">Issue type</th>
											<th style="max-width: 100px">Issue link</th>
											<th style="max-width: 100px">L0 Completeness</th>
											<th style="max-width: 60px">Actions</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

	<!-- Specific plugins scripts -->
	<!-- Datatables -->
	<script src="/static/assets/js/plugin/datatables/datatables.min.js"></script>
	<script src="/static/assets/js/plugin/chart.js/chart.min.js"></script>

	<!-- Page related JS classes -->
	<script>
		async function debugCompare() {
			let ajax1 = await fetch('/api/reporting/cds-sat-unavailability/previous-quarter').then(r=>r.json());
			let ajax2 = await fetch('/api/worker/cds-datatakes/previous-quarter').then(r=>r.json());

			console.log("=== AJAX Unavailability ===", ajax1);
			console.log("=== AJAX Datatakes ===", ajax2);
			console.log("=== SSR ===", {{ satellites|tojson }});
		}
		setTimeout(debugCompare, 2000);
	</script>
	<script>
		window.SENSING_DATA = {
			datatakes: {{ datatakes|tojson|safe }},
			unavailability: {{ unavailability|tojson|safe }},
			stats: {{ sensing_stats|tojson|safe }}
		};

		console.log("%c[SENSING_DATA LOADED]", "color:lime;font-weight:bold;", SENSING_DATA);
		if (!SENSING_DATA || !SENSING_DATA.stats) {
			console.error("SENSING_DATA invalid:", window.SENSING_DATA);
		}
	</script>
	<script>
		window.SPACE_SEGMENT_COLORS = {{ space_segment_colors|tojson|safe }};
	</script>
	<script src="/static/assets/js/quarterly-reports/space-segment.js"></script>
	<script>
		document.addEventListener("DOMContentLoaded", () =>{
			window.spaceSegment = new SpaceSegment();
			spaceSegment.init();

		});
	</script>

{% endblock javascripts %}